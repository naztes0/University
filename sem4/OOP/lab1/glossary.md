# Glossary of the project "BG Remover"

## Основні технології та фреймворки

### Node.js
Середовище виконання JavaScript, що дозволяє запускати JavaScript-код на стороні сервера. У проекті використовується як основна платформа для бекенду, обробки запитів та взаємодії з іншими сервісами.

### Express
JavaScript фреймворк для створення веб-серверів та API. В проекті використовується для маршрутизації, обробки HTTP-запитів та побудови RESTful API.

### MongoDB
Документоорієнтована NoSQL база даних, яка використовується для збереження інформації про користувачів, їх кредитний баланс та статус таймерів.

### Mongoose
ODM (Object Data Modeling) бібліотека для MongoDB і Node.js, яка надає схеми та моделі для роботи з базою даних через JavaScript об'єкти.

### React
JavaScript бібліотека для створення інтерактивних користувацьких інтерфейсів. Використовується для побудови фронтенд-частини додатку.

### Vite
Сучасний інструмент збірки фронтенд-проектів, що забезпечує швидку компіляцію та розробку застосунків на React. Використовується для розробки та збірки клієнтської частини.

### Babel
Транспілятор JavaScript, що перетворює сучасний код JavaScript у сумісний з більшістю браузерів. У проекті використовується для тестування з Jest та забезпечення кросбраузерної сумісності коду.

### Tailwind CSS
Utility-first CSS фреймворк, що дозволяє швидко створювати адаптивні інтерфейси користувача за допомогою готових класів стилів.

### Clerk
Сервіс автентифікації та управління користувачами, що використовується для реєстрації, входу та керування профілями користувачів.

### ClipDrop API
Зовнішнє API для видалення фону зображень. Використовується як основний інструмент обробки завантажених користувачем зображень.

### JWT (JSON Web Token)
Стандарт для створення токенів доступу, що використовується для аутентифікації користувачів та захисту API-ендпоінтів.

### Multer
Middleware для обробки `multipart/form-data`, використовується для завантаження та збереження зображень від користувачів.

### Axios
HTTP-клієнт на основі Promises для браузера та Node.js, використовується для виконання HTTP-запитів до зовнішніх API та між клієнтом і сервером.

### Svix
Бібліотека для перевірки та обробки вебхуків, використовується для перевірки автентичності вебхуків від Clerk.

## Архітектурні компоненти

### Моделі (Models)
Структури даних, що визначають схеми документів в MongoDB:
- `userModel` - модель користувача з полями clerkId, email, photo, firstName, lastName, creditBalance, nextCreditAt, timerActive, lastCreditUpdate

### Контролери (Controllers)
Функції, що обробляють запити та відправляють відповіді:
- `ImageController.js` - управління обробкою зображень (видалення фону)
- `UserController.js` - управління користувачами та їхніми кредитами

### Маршрути (Routes)
Визначають API-ендпоінти та пов'язують їх з контролерами:
- `imageRoutes.js` - маршрути для роботи з зображеннями
- `userRoutes.js` - маршрути для роботи з користувачами та вебхуками

### Проміжне ПЗ (Middleware)
Функції, що виконуються між запитом та відповіддю:
- `auth.js` - перевірка аутентифікації користувачів
- `multer.js` - обробка завантаження файлів

### Сервіси (Services)
Модулі, що містять бізнес-логіку додатку:
- `imageService.js` - сервіс для обробки зображень та видалення фону
- `userService.js` - сервіс для управління користувачами та їхніми кредитами

### Конфігурації (Configs)
Файли налаштувань додатку:
- `appConfig.js` - загальні налаштування програми
- `mongodb.js` - налаштування підключення до бази даних

## Функціональні компоненти

### Система аутентифікації
Механізм ідентифікації та авторизації користувачів:
- Clerk API для реєстрації та входу
- Вебхуки для синхронізації даних користувачів
- JWT токени для авторизації запитів до API

### Система кредитів
Механізм обмеження та відновлення кількості використань сервісу:
- `MAX_CREDITS` - максимальна кількість кредитів
- `CREDIT_REFRESH_TIME` - час оновлення кредитів у хвилинах

### Таймер кредитів
Система автоматичного поповнення кредитів з часом:
- `timerActive` - статус активності таймера
- `nextCreditAt` - час наступного поповнення кредиту
- `manageCreditTimer` - функція управління таймером кредитів

### Обробка зображень
Функціональність для видалення фону з зображень:
- `removeImageBackground` - функція для взаємодії з ClipDrop API
- Конвертація зображень у формат base64

## Концепції безпеки

### JWT авторизація
Метод захисту API-ендпоінтів:
- `authUser` - middleware для перевірки JWT токенів
- `jwt.decode` - розшифрування токена для отримання clerkId користувача

### Вебхуки з верифікацією
Захищений механізм отримання повідомлень від зовнішніх сервісів:
- `svix` - бібліотека для перевірки підпису вебхуків
- `clerkWebhooks` - обробник вебхуків від Clerk

### Змінні середовища
Механізм безпечного зберігання конфіденційних даних:
- `process.env` - доступ до змінних середовища
- `.env` - файл з налаштуваннями, не включений до репозиторію

## Розгортання та інфраструктура

### Vercel
Платформа для розгортання застосунків:
- `vercel.json` - конфігурація для розгортання

### Тестування
Інструменти для написання та запуску тестів:
- Jest - фреймворк для тестування JavaScript-коду, використовується для модульного тестування сервісів та функцій
- Babel - транспілятор JavaScript. Був використаний для підтримки сучасного синтаксису в тестах
- ESLint - статичний аналізатор коду для виявлення та виправлення проблем у JavaScript коді